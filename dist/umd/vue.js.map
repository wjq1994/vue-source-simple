{"version":3,"file":"vue.js","sources":["../../src/utils.js","../../src/observer/array.js","../../src/observer/dep.js","../../src/observer/index.js","../../src/state.js","../../src/compiler/parser.js","../../src/compiler/generate.js","../../src/compiler/index.js","../../src/vdom/patch.js","../../src/observer/watcher.js","../../src/lifecycle.js","../../src/init.js","../../src/vdom/index.js","../../src/render.js","../../src/index.js"],"sourcesContent":["export function isFunction(data) {\n    return typeof data === 'function';\n}\n\nexport function isObject(data) {\n    return typeof data === 'object' && data !== null;\n}","// 增加数组原型方法\nlet oldArrayProtoMethods = Array.prototype;\nexport let arrayMethods = Object.create(oldArrayProtoMethods);\nlet methods = [\n    'push',\n    'pop',\n    'shift',\n    'unshift',\n    'reverse',\n    'sort',\n    'splice'\n];\n// 数组的这7种方法会刚改数据，所以要对其重写\nmethods.forEach(method => {\n    arrayMethods[method] = function (...args) {\n        const result = oldArrayProtoMethods[method].apply(this, args);\n        const ob = this.__ob__;\n        let inserted;\n        switch (method) {\n            case 'push':\n            case 'unshift':\n                inserted = args;\n                break;\n            case 'splice':\n                inserted = args.slice(2)\n            default:\n                break;\n        }\n        if (inserted) ob.observeArray(inserted); // 对新增的每一项进行观测\n        return result\n    }\n})","let id = 0;\nclass Dep{\n    constructor(){\n        this.id = id++;\n        this.subs = [];\n    }\n    depend(){\n        if(Dep.target){\n            Dep.target.addDep(this);// 让watcher,去存放dep\n        }\n    }\n    notify(){\n        this.subs.forEach(watcher=>watcher.update());\n    }\n    addSub(watcher){\n        this.subs.push(watcher);\n    }\n}\nlet stack = [];\nexport function pushTarget(watcher){\n    Dep.target = watcher;\n    stack.push(watcher);\n}\nexport function popTarget(){\n    stack.pop();\n    Dep.target = stack[stack.length-1];\n}\n\nexport default Dep;","import { isObject } from \"../utils\";\nimport { arrayMethods } from './array';\nimport Dep from './dep';\n\n/**\n * 1. 如果是数据是对象会不停的递归劫持\n * 2. 如果是数组，数组没有监控索引的变化，只有监控7种方法的变化，以及数组中的数组及对象的递归劫持\n */\nclass Observer { // 观测值\n    constructor(value) {\n        Object.defineProperty(value, \"__ob__\", {\n            value: this,\n            enumerable: false //不可枚举\n        });\n        // value.__ob__ = this; 存在会造成死循环，变成不可枚举\n        // 数组劫持\n        if (Array.isArray(value)) {\n            // 对数组原来的方法进行改写、切片编程，高阶函数\n            value.__proto__ = arrayMethods;\n            // 如果数组中的数据是对象类型，需要监控对象的变化\n            // 数组没有监控索引的变化\n            this.observeArray(value);\n        } else {\n            this.walk(value); // 对象劫持\n        }\n    }\n    /**\n     * 对数组中的数组或对象继续劫持\n     * 套娃劫持效率低下\n     * @param {*} value \n     */\n    observeArray(value) {\n        for (let i = 0; i < value.length; i++) {\n            observe(value[i]);\n        }\n    }\n    walk(data) { // 让对象上的所有属性依次进行观测\n        let keys = Object.keys(data);\n        for (let i = 0; i < keys.length; i++) {\n            let key = keys[i];\n            let value = data[key];\n            defineReactive(data, key, value);\n        }\n    }\n}\n\n// vue2 会对对象进行遍历 将每个属性 用defineProperty 重新定义性能差\n// 数据劫持之后，需要对属性进行监听\nfunction defineReactive(data, key, value) {\n    observe(value);\n    let dep = new Dep();\n    Object.defineProperty(data, key, {\n        get() {\n            console.log(\"-----get\");\n            if(Dep.target){ // 如果取值时有watcher\n                dep.depend(); // 让watcher保存dep，并且让dep 保存watcher\n            }\n            return value\n        },\n        set(newValue) {\n            console.log(\"-----set\", newValue);\n            if (newValue == value) return;\n            observe(newValue);\n            value = newValue;\n            // 通知依赖更改\n            dep.notify();\n        }\n    })\n}\nexport function observe(data) {\n    if (!isObject(data)) {\n        return;\n    }\n    if (data.__ob__) {\n        return;\n    }\n    return new Observer(data);\n}","import {isFunction} from \"./utils\";\nimport {observe} from \"./observer/index\";\n\nexport function initState(vm){\n    const opts = vm.$options;\n    if(opts.props){\n        initProps(vm);\n    }\n    if(opts.methods){\n        initMethod(vm);\n    }\n    if(opts.data){\n        // 初始化data\n        initData(vm);\n    }\n    if(opts.computed){\n        initComputed(vm);\n    }\n    if(opts.watch){\n        initWatch(vm);\n    }\n}\nfunction initProps(){}\nfunction initMethod(){}\nfunction proxy(vm,source,key){\n    Object.defineProperty(vm,key,{\n        get(){\n            return vm[source][key];\n        },\n        set(newValue){\n            vm[source][key] = newValue;\n        }\n    });\n}\nfunction initData(vm){\n    // 初始化数据，进行数据劫持 Object.defineProperty\n    let data = vm.$options.data;\n    // data 有可能是函数 用vm._data进行关联\n    data = vm._data = isFunction(data) ? data.call(vm) : data;\n    // 用户取 vm.xxx => vm._data.xxx\n    for(let key in data){ // 将_data上的属性全部代理给vm实例\n        proxy(vm,'_data',key)\n    }\n    observe(data);\n}\nfunction initComputed(){}\nfunction initWatch(){}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;  // 标签名\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; // 用来获取的标签名的match后的索引为1\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 标签开头的正则 捕获的内容是标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的 >\n\nlet root;\nlet currentParent;\n// 用栈的方式处理节点\nlet stack = [];\nconst ELEMENT_TYPE = 1;\nconst TEXT_TYPE = 3;\n\n/**\n * 生成ast语法树，语法树就是用对象描述js语法\n * @param {*} tagName \n * @param {*} attrs \n */\nfunction createASTElement(tagName,attrs){\n    return {\n        tag:tagName,\n        type:ELEMENT_TYPE,\n        children:[],\n        attrs,\n        parent:null\n    }\n}\nfunction start(tagName, attrs) {\n    let element = createASTElement(tagName,attrs);\n    if(!root){\n        root = element;\n    }\n    currentParent = element;\n    stack.push(element);\n}\nfunction end(tagName) {\n    let element = stack.pop();\n    currentParent = stack[stack.length-1];\n    if(currentParent){\n        element.parent = currentParent;\n        currentParent.children.push(element);\n    }\n}\nfunction chars(text) {\n    text = text.replace(/\\s/g,'');\n    if(text){\n        currentParent.children.push({\n            type:TEXT_TYPE,\n            text\n        })\n    }\n}\n\n// 解析整个传入html\nexport function parseHTML(html){\n    // 循环html字符串\n    while(html){\n        // 如果此时首字符串是<，说明是标签\n        let textEnd = html.indexOf('<');\n        if(textEnd == 0){\n            const startTagMatch = parseStartTag();\n            if(startTagMatch){\n                start(startTagMatch.tagName,startTagMatch.attrs);\n                continue;\n            }\n            const endTagMatch = html.match(endTag);\n            if(endTagMatch){\n                advance(endTagMatch[0].length);\n                end(endTagMatch[1]);\n                continue;\n            }\n        }\n        let text;\n        if(textEnd >= 0){\n            text = html.substring(0,textEnd);\n        }\n        if(text){\n            advance(text.length);\n            chars(text);\n        }\n        return root;\n    }\n    function advance(n){\n        html = html.substring(n);\n    }\n    function parseStartTag(){\n        // 捕获标签名称\n        const start = html.match(startTagOpen);\n        if(start){\n            const match = {\n                tagName:start[1],\n                attrs:[]\n            }\n            advance(start[0].length);\n            let attr,end;\n            // 匹配标签 结束 >\n            // 获取标签属性和属性值\n            while(!(end = html.match(startTagClose)) && (attr = html.match(attribute))){\n                advance(attr[0].length);\n                match.attrs.push({name:attr[1],value:attr[3]});\n            }\n            if(end){\n                advance(end[0].length);\n                return match\n            }\n        }\n    }\n}","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // {{aaa}}\n\nfunction gen(node) {\n    if (node.type == 1) {\n        return generate(node);\n    } else {\n        let text = node.text\n        if(!defaultTagRE.test(text)){\n            return `_v(${JSON.stringify(text)})`\n        }\n        let lastIndex = defaultTagRE.lastIndex = 0\n        let tokens = [];\n        let match,index;\n        \n        while (match = defaultTagRE.exec(text)) {\n            index = match.index;\n            if(index > lastIndex){\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)));\n            }\n            tokens.push(`_s(${match[1].trim()})`)\n            lastIndex = index + match[0].length;\n        }\n        if(lastIndex < text.length){\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\n        }\n        return `_v(${tokens.join('+')})`;\n    }\n}\nfunction getChildren(el) { // 生成儿子节点\n    const children = el.children;\n    if (children) {\n        return `${children.map(c=>gen(c)).join(',')}`\n    } else {\n        return false;\n    }\n}\nfunction genProps(attrs){ // 生成属性\n    let str = '';\n    for(let i = 0; i<attrs.length; i++){\n        let attr = attrs[i];\n        if(attr.name === 'style'){ //color:red;background:green\n            let obj = {}\n            attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function() {\n                obj[arguments[1]] = arguments[2];\n            })\n            // attr.value.split(';').forEach(item=>{\n            //     let [key,value] = item.split(':');\n            //     obj[key] = value;\n            // })\n            attr.value = obj;\n        }\n        str += `${attr.name}:${JSON.stringify(attr.value)},`;\n    }\n    return `{${str.slice(0,-1)}}`;\n}\n\n\n/**\n * 将AST对象转换成Render函数\n<div style=\"color:red\">hello {{name}} <span></span></div>\nrender(){\n   return _c('div',{style:{color:'red'}},_v('hello'+_s(name)),_c('span',undefined,''))\n}\n * \n */\n\n/**\n * \n * @param {*AST对象} el \n */\nexport function generate(el) {\n    let children = getChildren(el);\n    let code = `_c('${el.tag}',${\n        el.attrs.length?`${genProps(el.attrs)}`:'undefined'\n    }${\n        children? `,${children}`:''\n    })`;\n    return code;\n}","import {parseHTML} from \"./parser\";\nimport {generate} from \"./generate\";\n\n/**\n * 语法分析生成render函数\n * 模版引擎原理\n * new Function + with\n * @param {模版} template \n */\nexport function compileToFunctions(template){\n    let root = parseHTML(template);\n    let code = generate(root);\n    let render = `with(this){return ${code}}`;\n    let renderFn = new Function(render);\n    return renderFn\n}","// 用vnode 来生成真实dom 替换原来的dom元素\nexport function patch(oldVnode, vnode) {\n    \n    if(oldVnode.nodeType == 1) {\n        const parentElm = oldVnode.parentNode; //找到父元素\n\n        let elm = createElm(vnode); // 根据虚拟节点 创建元素\n\n        parentElm.insertBefore(elm, oldVnode.nextSibling);\n\n        parentElm.removeChild(oldVnode);\n\n        return elm;\n    }\n}\n\nfunction createElm(vnode) {\n    let {tag, data, children, text, vm} = vnode;\n    if (typeof tag === 'string') { // 元素\n        vnode.el = document.createElement(tag); // 虚拟节点会有一个el属性 对应\n        children.forEach(child => {\n            vnode.el.appendChild(createElm(child));\n        });\n    } else {\n        vnode.el = document.createTextNode(text);\n    }\n\n    return vnode.el;\n}","import { pushTarget, popTarget } from './dep'\nlet id = 0;\nclass Watcher {\n    constructor(vm, exprOrFn, cb, options) {\n        this.vm = vm;\n        this.exprOrFn = exprOrFn;\n        if (typeof exprOrFn == 'function') {\n            this.getter = exprOrFn;\n        }\n        this.cb = cb;\n        this.options = options;\n        this.id = id++;\n        // 存放依赖\n        this.deps = [];\n        this.depsId = new Set();\n        this.get();\n    }\n    /**\n     * 每一个属性应该有一个依赖\n     */\n    get() {\n        // 依赖注入\n        pushTarget(this);\n        // 下面这个方法，会执行defineReactive里属性的get方法\n        // 在get方法里，需要对属性完成依赖注入\n        this.getter();\n        // 依赖删除\n        popTarget();\n    }\n    /**\n     * 更新操作\n     */\n    update() {\n        this.get();\n    }\n    addDep(dep) {\n        let id = dep.id;\n        if (!this.depsId.has(id)) {\n            this.depsId.add(id);\n            this.deps.push(dep);\n            dep.addSub(this);\n        }\n    }\n}\n\nexport default Watcher;","import {patch} from './vdom/patch';\nimport Watcher from './observer/watcher'\n\nexport function lifecycleMixin(Vue) {\n    Vue.prototype._update = function (vnode) {\n        const vm = this;\n        vm.$el = patch(vm.$el, vnode);\n    }\n}\nexport function mountComponent(vm, el) {\n    vm.$el = el;\n    let updateComponent = () => {\n        // 将虚拟节点 渲染到页面上\n        // 调用render函数，生成虚拟DOM\n        // 用虚拟DOM，生成真实DOM\n        vm._update(vm._render());\n    }\n    // 实现响应式更新思路：观察者模式\n    // 被观察者 data里属性\n    // 这是渲染DOM的watcher\n    new Watcher(vm, updateComponent, () => {}, true);\n}","import { initState } from './state';\nimport { compileToFunctions } from './compiler/index';\nimport { mountComponent } from './lifecycle'\n\nexport function initMixin(Vue) {\n    Vue.prototype._init = function (options) {\n        const vm = this;\n        vm.$options = options\n        // 初始化状态，对数据进行初始化\n        initState(vm); // 数据劫持\n        // 页面挂载\n        if (vm.$options.el) {\n            vm.$mount(vm.$options.el);\n        }\n    }\n    Vue.prototype.$mount = function (el) {\n        const vm = this;\n        const options = vm.$options;\n        el = document.querySelector(el);\n\n        // 如果没有render方法\n        if (!options.render) {\n            let template = options.template;\n            // 如果没有模板但是有el\n            if (!template && el) {\n                template = el.outerHTML;\n            }\n\n            const render = compileToFunctions(template);\n            options.render = render;\n        }\n        mountComponent(vm, el);\n    }\n}","export function createTextNode(vm, text) {\n    return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\nexport function createElement(vm, tag, data = {}, ...children) {\n    let key = data.key;\n    if (key) {\n        delete data.key;\n    }\n    return vnode(vm, tag, data, key, children);\n}\nfunction vnode(vm, tag, data, key, children, text) {\n    return {\n        vm,\n        tag,\n        data,\n        key,\n        children,\n        text\n    }\n}","import {createTextNode,createElement} from './vdom/index'\n\nexport function renderMixin(Vue){\n    Vue.prototype._v = function (text) { // 创建文本\n        return createTextNode(this, text);\n    }\n    Vue.prototype._c = function () { // 创建元素\n        return createElement(this, ...arguments);\n    }\n    Vue.prototype._s = function (val) {\n        return val == null? '' : (typeof val === 'object'?JSON.stringify(val):val);\n    }\n    Vue.prototype._render = function () {\n        const vm = this;\n        let render = vm.$options.render; // 解析出来的render方法\n\n        let vnode = render.call(vm);\n\n        return vnode;\n    }\n}","// 导出vue构造函数\n\nimport { initMixin } from './init';\nimport { lifecycleMixin } from './lifecycle';\nimport { renderMixin } from './render';\n\nfunction Vue(options) {\n    this._init(options);\n}\ninitMixin(Vue); // 给原型上新增_init方法\nrenderMixin(Vue); // _render\nlifecycleMixin(Vue); // _update\nexport default Vue;"],"names":["isFunction","data","isObject","oldArrayProtoMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","args","result","apply","ob","__ob__","inserted","slice","observeArray","id","Dep","subs","target","addDep","watcher","update","push","stack","pushTarget","popTarget","pop","length","Observer","value","defineProperty","enumerable","isArray","__proto__","walk","i","observe","keys","key","defineReactive","dep","get","console","log","depend","set","newValue","notify","initState","vm","opts","$options","props","initData","computed","watch","proxy","source","_data","call","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","root","currentParent","ELEMENT_TYPE","TEXT_TYPE","createASTElement","tagName","attrs","tag","type","children","parent","start","element","end","chars","text","replace","parseHTML","html","textEnd","indexOf","startTagMatch","parseStartTag","endTagMatch","match","advance","substring","n","attr","name","defaultTagRE","gen","node","generate","test","JSON","stringify","lastIndex","tokens","index","exec","trim","join","getChildren","el","map","c","genProps","str","obj","arguments","code","compileToFunctions","template","render","renderFn","Function","patch","oldVnode","vnode","nodeType","parentElm","parentNode","elm","createElm","insertBefore","nextSibling","removeChild","document","createElement","child","appendChild","createTextNode","Watcher","exprOrFn","cb","options","getter","deps","depsId","Set","has","add","addSub","lifecycleMixin","Vue","_update","$el","mountComponent","updateComponent","_render","initMixin","_init","$mount","querySelector","outerHTML","undefined","renderMixin","_v","_c","_s","val"],"mappings":"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"}